<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dan's Bakeshop</title>
  <style>
  body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background-color: #f4f4f4;
  color: #333;
}

.container {
  max-width: 800px;
  margin: 50px auto;
  padding: 20px;
  background: white;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  border-radius: 8px;
}

h1, h2 {
  text-align: center;
  color: #444;
}

.form-group {
  margin-bottom: 15px;
}

label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
}

input {
  width: 100%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

button {
  display: block;
  width: 100%;
  padding: 10px;
  background-color: #007BFF;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
}

button:hover {
  background-color: #0056b3;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}

table th, table td {
  padding: 10px;
  border: 1px solid #ddd;
  text-align: center;
}

table th {
  background-color: #f8f8f8;
}

.actions button {
  margin: 0 5px;
  padding: 5px 10px;
  background-color: #dc3545;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.actions button:hover {
  background-color: #a71d2a;
}

  </style>
</head>
<body>
  <div class="container">
    <h1>Inventory Management</h1>
<form id="inventoryForm">
  <label for="itemName">Name:</label>
  <input type="text" id="itemName" required>
  <label for="itemPrice">Price:</label>
  <input type="number" id="itemPrice" required>
  <label for="itemOpening">Opening Quantity:</label>
  <input type="number" id="itemOpening" required>
  <button type="submit">Add Item</button>
</form>

<h2>Inventory</h2>
<table id="inventoryTable">
  <thead>
    <tr>
      <th>Name</th>
      <th>Opening</th>
      <th>Ending</th>
      <th>Price</th>
      <th>Sold</th>
      <th>Total</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h3>Total Profit: <span id="totalProfit">₱0.00</span></h3>
<button id="resetProfitButton">Reset Profit</button>
<h2>Sales History</h2>
<table id="salesHistoryTable">
  <thead>
    <tr>
      <th>Item Name</th>
      <th>Quantity Sold</th>
      <th>Total Revenue</th>
    </tr>
  </thead>
  <tbody></tbody>
  <button id="resetSalesHistoryButton">Reset Sales History</button>

</table>


  </div>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
  const inventoryForm = document.getElementById("inventoryForm");
  const inventoryTableBody = document.querySelector("#inventoryTable tbody");
  const totalProfitElement = document.getElementById("totalProfit");
  const resetProfitButton = document.getElementById("resetProfitButton");

  let inventory = [];
  let totalProfit = 0;

  // Add an item to inventory
  inventoryForm.addEventListener("submit", (e) => {
    e.preventDefault();

    const itemName = document.getElementById("itemName").value;
    const itemPrice = parseFloat(document.getElementById("itemPrice").value);
    const itemOpening = parseInt(document.getElementById("itemOpening").value);

    inventory.push({
      name: itemName,
      price: itemPrice,
      opening: itemOpening,
      ending: itemOpening,
      sold: 0,
      total: 0,
    });
    displayInventory();

    // Reset form
    inventoryForm.reset();
  });

  // Display inventory in the table
  function displayInventory() {
    inventoryTableBody.innerHTML = "";
    inventory.forEach((item, index) => {
      const row = document.createElement("tr");

      row.innerHTML = `
        <td>${item.name}</td>
        <td>${item.opening}</td>
        <td>${item.ending}</td>
        <td>₱${item.price.toFixed(2)}</td>
        <td>${item.sold}</td>
        <td>₱${item.total.toFixed(2)}</td>
        <td class="actions">
          <button onclick="addQuantity(${index})">Add</button>
          <button onclick="reduceQuantity(${index})">Reduce</button>
          <button onclick="deleteItem(${index})">Delete</button>
        </td>
      `;
      inventoryTableBody.appendChild(row);
    });
  }

  // Add quantity to an item
  window.addQuantity = (index) => {
    const additionalQuantity = parseInt(prompt("Enter quantity to add:", 0));
    if (isNaN(additionalQuantity) || additionalQuantity <= 0) {
      alert("Invalid quantity.");
      return;
    }
    inventory[index].ending += additionalQuantity;
    displayInventory();
  };

  // Reduce quantity of an item and update sold and profit
  window.reduceQuantity = (index) => {
    const reduceQuantity = parseInt(prompt("Enter quantity to reduce:", 0));
    if (isNaN(reduceQuantity) || reduceQuantity <= 0) {
      alert("Invalid quantity.");
      return;
    }
    if (reduceQuantity > inventory[index].ending) {
      alert("Cannot reduce more than the current stock.");
      return;
    }

    // Update ending quantity, sold quantity, total revenue, and profit
    inventory[index].ending -= reduceQuantity;
    inventory[index].sold += reduceQuantity;
    const revenue = reduceQuantity * inventory[index].price;
    inventory[index].total += revenue;
    totalProfit += revenue;

    updateProfitDisplay();
    displayInventory();
  };

  // Delete item from inventory
  window.deleteItem = (index) => {
    inventory.splice(index, 1);
    displayInventory();
  };

  // Reset profit to zero
  resetProfitButton.addEventListener("click", () => {
    if (confirm("Are you sure you want to reset the profit to zero?")) {
      totalProfit = 0;
      updateProfitDisplay();
    }
  });

  // Update profit display
  function updateProfitDisplay() {
    totalProfitElement.textContent = `₱${totalProfit.toFixed(2)}`;
  }

  const salesHistoryTableBody = document.querySelector("#salesHistoryTable tbody");

// Reduce quantity of an item and update sold and profit
window.reduceQuantity = (index) => {
  const reduceQuantity = parseInt(prompt("Enter quantity to reduce:", 0));
  if (isNaN(reduceQuantity) || reduceQuantity <= 0) {
    alert("Invalid quantity.");
    return;
  }
  if (reduceQuantity > inventory[index].ending) {
    alert("Cannot reduce more than the current stock.");
    return;
  }

  // Update ending quantity, sold quantity, total revenue, and profit
  inventory[index].ending -= reduceQuantity;
  inventory[index].sold += reduceQuantity;
  const revenue = reduceQuantity * inventory[index].price;
  inventory[index].total += revenue;
  totalProfit += revenue;

  // Update sales history
  updateSalesHistory(inventory[index].name, reduceQuantity, revenue);

  updateProfitDisplay();
  displayInventory();
};

// Update sales history
function updateSalesHistory(itemName, quantitySold, totalRevenue) {
  const row = document.createElement("tr");
  row.innerHTML = `
    <td>${itemName}</td>
    <td>${quantitySold}</td>
    <td>₱${totalRevenue.toFixed(2)}</td>
  `;
  salesHistoryTableBody.appendChild(row);
}
const resetSalesHistoryButton = document.getElementById("resetSalesHistoryButton");

// Reset sales history
resetSalesHistoryButton.addEventListener("click", () => {
  if (confirm("Are you sure you want to reset the sales history?")) {
    const salesHistoryTableBody = document.querySelector("#salesHistoryTable tbody");
    salesHistoryTableBody.innerHTML = ""; // Clear all rows from the sales history table
  }
});

});

  </script>
</body>
</html>
